<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Dan Herrera and Gabby Palomo">
<meta name="dcterms.date" content="2024-06-01">

<title>Gabriela Palomo - Data Visualization in R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<script src="../../../site_libs/cookie-consent/cookie-consent.js"></script>
<link href="../../../site_libs/cookie-consent/cookie-consent.css" rel="stylesheet">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-CKLD1G1PM7"></script>

<script type="text/plain" cookie-consent="tracking">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-CKLD1G1PM7', { 'anonymize_ip': true});
</script>

<script type="text/javascript" charset="UTF-8">
document.addEventListener('DOMContentLoaded', function () {
cookieconsent.run({
  "notice_banner_type":"simple",
  "consent_type":"express",
  "palette":"light",
  "language":"en",
  "page_load_consent_levels":["strictly-necessary"],
  "notice_banner_reject_button_hide":false,
  "preferences_center_close_button_hide":false,
  "website_name":""
  });
});
</script> 
  

<script src="../../../site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="../../../site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">


<link rel="stylesheet" href="documentstyle.scss">
<meta property="og:title" content="Gabriela Palomo - Data Visualization in R">
<meta property="og:description" content="">
<meta property="og:image" content="tutorial_uwin_ggplot2_files/figure-html/unnamed-chunk-4-1.png">
<meta property="og:site-name" content="Gabriela Palomo">
<meta name="twitter:title" content="Gabriela Palomo - Data Visualization in R">
<meta name="twitter:description" content="">
<meta name="twitter:image" content="tutorial_uwin_ggplot2_files/figure-html/unnamed-chunk-4-1.png">
<meta name="twitter:creator" content="@gabbspalomo">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">Gabriela Palomo</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../blog.html" rel="" target="">
 <span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../cliparts.html" rel="" target="">
 <span class="menu-text">ClipArts</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-projects" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Projects</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-projects">    
        <li>
    <a class="dropdown-item" href="../../../projects/portfolio.html" rel="" target="">
 <span class="dropdown-text">Portfolio - Data Visualization</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="../../../publications.html" rel="" target="">
 <span class="menu-text">Publications</span></a>
  </li>  
  <li class="dropdown-header">
 <span class="menu-text">Workshops</span></li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text"></span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-">    
        <li>
    <a class="dropdown-item" href="../../../workshops/intro_ggplot2/index.html" rel="" target="">
 <span class="dropdown-text">Introduction to ggplot2</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active" data-toc-expanded="4">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#learning-objectives" id="toc-learning-objectives" class="nav-link active" data-scroll-target="#learning-objectives">Learning objectives</a></li>
  <li><a href="#introduction" id="toc-introduction" class="nav-link" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#presentation" id="toc-presentation" class="nav-link" data-scroll-target="#presentation">Presentation</a></li>
  <li><a href="#tutorial-data-visualization-for-an-occupancy-analysis." id="toc-tutorial-data-visualization-for-an-occupancy-analysis." class="nav-link" data-scroll-target="#tutorial-data-visualization-for-an-occupancy-analysis.">Tutorial: Data visualization for an occupancy analysis.</a>
  <ul>
  <li><a href="#pre-analysis-data-visualization-graph-1" id="toc-pre-analysis-data-visualization-graph-1" class="nav-link" data-scroll-target="#pre-analysis-data-visualization-graph-1">Pre-analysis data visualization: graph 1</a></li>
  <li><a href="#correlation-plot-graph-2" id="toc-correlation-plot-graph-2" class="nav-link" data-scroll-target="#correlation-plot-graph-2">Correlation plot: graph 2</a></li>
  <li><a href="#post-analysis-data-visualization-prediction-plots-graph-3" id="toc-post-analysis-data-visualization-prediction-plots-graph-3" class="nav-link" data-scroll-target="#post-analysis-data-visualization-prediction-plots-graph-3">Post-analysis data visualization: prediction plots graph 3</a></li>
  <li><a href="#post-analysis-coefficient-plot-graph-4" id="toc-post-analysis-coefficient-plot-graph-4" class="nav-link" data-scroll-target="#post-analysis-coefficient-plot-graph-4">Post-analysis: coefficient plot graph 4</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><strong>Data Visualization in R</strong></h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Dan Herrera and Gabby Palomo </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">June 1, 2024</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="learning-objectives" class="level2">
<h2 class="anchored" data-anchor-id="learning-objectives">Learning objectives</h2>
<ol type="1">
<li>Learn the basics of ggplot2 grammar and syntax.</li>
<li>Create two graphs that will help you understand your covariates and the relationship between them prior to visualizing your occupancy results.</li>
<li>Create two graphs that will help you visualize the results of an occupancy analysis.</li>
<li>Customize the <code>theme()</code> of your graphs.</li>
<li>Export graphs as .jpg, .png, .pdf, using <code>ggsave()</code></li>
</ol>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>You will find that we are using the native pipe operator <code>|&gt;</code>. This native pipe is part of base R and has been available since R version 4.1.0 (May 2021). You can choose which pipe to use, either the native pipe <code>|&gt;</code> or the magrittr pipe <code>%&gt;%</code> by going to Tools &gt; Global options &gt; Code.</p>
</div>
</div>
</section>
<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>We are going to use the package <code>ggplot2</code> to create publication ready graphs in r. To begin, we are going to go over a presentation linked below to learn the basic components of <code>ggplot2</code> and the grammar of graphics. Once we have covered the basics, then we will proceed to the tutorial.</p>
</section>
<section id="presentation" class="level2">
<h2 class="anchored" data-anchor-id="presentation">Presentation</h2>
<p>Here’s a link to the <a href="https://gabspalomo.github.io/slides/uwin_ggplot2/ppt/uwin_ggplot2.html#/title-slide">presentation</a></p>
</section>
<section id="tutorial-data-visualization-for-an-occupancy-analysis." class="level2">
<h2 class="anchored" data-anchor-id="tutorial-data-visualization-for-an-occupancy-analysis.">Tutorial: Data visualization for an occupancy analysis.</h2>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Warning: We pack a lot of information about <code>ggplot</code> into the first graph and it can be overwhelming. The graphs that follow will be easier since you will already be familiar with many of the concepts and we won’t need to explain them as thoroughly.</p>
</div>
</div>
<p>Let’s begin by loading the packages and data that we are going to be working with. We will load the packages using the <code>pacman</code> package, which will automatically download any libraries used in this tutorial that aren’t already downloaded on your computer. Just make sure to install the <code>pacman</code> package if you haven’t already!</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">#install.packages("pacman")</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(ggplot2, <span class="co">#flexible and professional graphics</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>               dplyr, <span class="co">#data manipulation</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>               tidyr, <span class="co">#data manipulation</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>               ggdist, <span class="co">#visualize distributions</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>               ggridges, <span class="co">#visualize distributions</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>               ggcorrplot, <span class="co">#visualize correlation </span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>               colorspace, <span class="co">#provides a range of color palettes</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>               cowplot) <span class="co">#allows us to arrange plots </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now let’s load the data that we will be working with.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Covariates </span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>land_cover <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(<span class="st">'./data/Chicago_NLCD_landcover.csv'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">

<div id="vmuqembjmk" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#vmuqembjmk table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#vmuqembjmk thead, #vmuqembjmk tbody, #vmuqembjmk tfoot, #vmuqembjmk tr, #vmuqembjmk td, #vmuqembjmk th {
  border-style: none;
}

#vmuqembjmk p {
  margin: 0;
  padding: 0;
}

#vmuqembjmk .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#vmuqembjmk .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#vmuqembjmk .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#vmuqembjmk .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#vmuqembjmk .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#vmuqembjmk .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#vmuqembjmk .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#vmuqembjmk .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#vmuqembjmk .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#vmuqembjmk .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#vmuqembjmk .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#vmuqembjmk .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#vmuqembjmk .gt_spanner_row {
  border-bottom-style: hidden;
}

#vmuqembjmk .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#vmuqembjmk .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#vmuqembjmk .gt_from_md > :first-child {
  margin-top: 0;
}

#vmuqembjmk .gt_from_md > :last-child {
  margin-bottom: 0;
}

#vmuqembjmk .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#vmuqembjmk .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#vmuqembjmk .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#vmuqembjmk .gt_row_group_first td {
  border-top-width: 2px;
}

#vmuqembjmk .gt_row_group_first th {
  border-top-width: 2px;
}

#vmuqembjmk .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#vmuqembjmk .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#vmuqembjmk .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#vmuqembjmk .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#vmuqembjmk .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#vmuqembjmk .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#vmuqembjmk .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#vmuqembjmk .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#vmuqembjmk .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#vmuqembjmk .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#vmuqembjmk .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#vmuqembjmk .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#vmuqembjmk .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#vmuqembjmk .gt_left {
  text-align: left;
}

#vmuqembjmk .gt_center {
  text-align: center;
}

#vmuqembjmk .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#vmuqembjmk .gt_font_normal {
  font-weight: normal;
}

#vmuqembjmk .gt_font_bold {
  font-weight: bold;
}

#vmuqembjmk .gt_font_italic {
  font-style: italic;
}

#vmuqembjmk .gt_super {
  font-size: 65%;
}

#vmuqembjmk .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#vmuqembjmk .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#vmuqembjmk .gt_indent_1 {
  text-indent: 5px;
}

#vmuqembjmk .gt_indent_2 {
  text-indent: 10px;
}

#vmuqembjmk .gt_indent_3 {
  text-indent: 15px;
}

#vmuqembjmk .gt_indent_4 {
  text-indent: 20px;
}

#vmuqembjmk .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    <tr class="gt_heading">
      <td colspan="10" class="gt_heading gt_title gt_font_normal" style=""><strong>Landcover Covariates</strong></td>
    </tr>
    <tr class="gt_heading">
      <td colspan="10" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style="">NLCD landcover classes</td>
    </tr>
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id=""></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="sites">sites</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="water">water</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="lawn_grass">lawn_grass</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="urban">urban</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="forest">forest</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="shrub">shrub</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="herbaceous">herbaceous</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="wetland">wetland</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="ag">ag</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><th id="stub_1_1" scope="row" class="gt_row gt_right gt_stub" style="font-family: Courier;">1</th>
<td headers="stub_1_1 sites" class="gt_row gt_left">C04-MBP1</td>
<td headers="stub_1_1 water" class="gt_row gt_right">0.01</td>
<td headers="stub_1_1 lawn_grass" class="gt_row gt_right">0.01</td>
<td headers="stub_1_1 urban" class="gt_row gt_right">0.82</td>
<td headers="stub_1_1 forest" class="gt_row gt_right">0.05</td>
<td headers="stub_1_1 shrub" class="gt_row gt_right">0.00</td>
<td headers="stub_1_1 herbaceous" class="gt_row gt_right">0.00</td>
<td headers="stub_1_1 wetland" class="gt_row gt_right">0.08</td>
<td headers="stub_1_1 ag" class="gt_row gt_right">0.00</td></tr>
    <tr><th id="stub_1_2" scope="row" class="gt_row gt_right gt_stub" style="font-family: Courier;">2</th>
<td headers="stub_1_2 sites" class="gt_row gt_left">C05-BEA1</td>
<td headers="stub_1_2 water" class="gt_row gt_right">0.08</td>
<td headers="stub_1_2 lawn_grass" class="gt_row gt_right">0.06</td>
<td headers="stub_1_2 urban" class="gt_row gt_right">0.52</td>
<td headers="stub_1_2 forest" class="gt_row gt_right">0.04</td>
<td headers="stub_1_2 shrub" class="gt_row gt_right">0.00</td>
<td headers="stub_1_2 herbaceous" class="gt_row gt_right">0.13</td>
<td headers="stub_1_2 wetland" class="gt_row gt_right">0.11</td>
<td headers="stub_1_2 ag" class="gt_row gt_right">0.01</td></tr>
    <tr><th id="stub_1_3" scope="row" class="gt_row gt_right gt_stub" style="font-family: Courier;">3</th>
<td headers="stub_1_3 sites" class="gt_row gt_left">C05-BMP1</td>
<td headers="stub_1_3 water" class="gt_row gt_right">0.26</td>
<td headers="stub_1_3 lawn_grass" class="gt_row gt_right">0.13</td>
<td headers="stub_1_3 urban" class="gt_row gt_right">0.32</td>
<td headers="stub_1_3 forest" class="gt_row gt_right">0.02</td>
<td headers="stub_1_3 shrub" class="gt_row gt_right">0.01</td>
<td headers="stub_1_3 herbaceous" class="gt_row gt_right">0.04</td>
<td headers="stub_1_3 wetland" class="gt_row gt_right">0.19</td>
<td headers="stub_1_3 ag" class="gt_row gt_right">0.00</td></tr>
    <tr><th id="stub_1_4" scope="row" class="gt_row gt_right gt_stub" style="font-family: Courier;">4</th>
<td headers="stub_1_4 sites" class="gt_row gt_left">C05-BMP2</td>
<td headers="stub_1_4 water" class="gt_row gt_right">0.15</td>
<td headers="stub_1_4 lawn_grass" class="gt_row gt_right">0.00</td>
<td headers="stub_1_4 urban" class="gt_row gt_right">0.28</td>
<td headers="stub_1_4 forest" class="gt_row gt_right">0.04</td>
<td headers="stub_1_4 shrub" class="gt_row gt_right">0.01</td>
<td headers="stub_1_4 herbaceous" class="gt_row gt_right">0.20</td>
<td headers="stub_1_4 wetland" class="gt_row gt_right">0.24</td>
<td headers="stub_1_4 ag" class="gt_row gt_right">0.00</td></tr>
    <tr><th id="stub_1_5" scope="row" class="gt_row gt_right gt_stub" style="font-family: Courier;">5</th>
<td headers="stub_1_5 sites" class="gt_row gt_left">C05-EGG1</td>
<td headers="stub_1_5 water" class="gt_row gt_right">0.07</td>
<td headers="stub_1_5 lawn_grass" class="gt_row gt_right">0.02</td>
<td headers="stub_1_5 urban" class="gt_row gt_right">0.71</td>
<td headers="stub_1_5 forest" class="gt_row gt_right">0.03</td>
<td headers="stub_1_5 shrub" class="gt_row gt_right">0.00</td>
<td headers="stub_1_5 herbaceous" class="gt_row gt_right">0.01</td>
<td headers="stub_1_5 wetland" class="gt_row gt_right">0.13</td>
<td headers="stub_1_5 ag" class="gt_row gt_right">0.03</td></tr>
    <tr><th id="stub_1_6" scope="row" class="gt_row gt_right gt_stub" style="font-family: Courier; font-size: x-small; background-color: #E4E4E4;">6..118</th>
<td headers="stub_1_6 sites" class="gt_row gt_left" style="background-color: #E4E4E4;"></td>
<td headers="stub_1_6 water" class="gt_row gt_right" style="background-color: #E4E4E4;"></td>
<td headers="stub_1_6 lawn_grass" class="gt_row gt_right" style="background-color: #E4E4E4;"></td>
<td headers="stub_1_6 urban" class="gt_row gt_right" style="background-color: #E4E4E4;"></td>
<td headers="stub_1_6 forest" class="gt_row gt_right" style="background-color: #E4E4E4;"></td>
<td headers="stub_1_6 shrub" class="gt_row gt_right" style="background-color: #E4E4E4;"></td>
<td headers="stub_1_6 herbaceous" class="gt_row gt_right" style="background-color: #E4E4E4;"></td>
<td headers="stub_1_6 wetland" class="gt_row gt_right" style="background-color: #E4E4E4;"></td>
<td headers="stub_1_6 ag" class="gt_row gt_right" style="background-color: #E4E4E4;"></td></tr>
    <tr><th id="stub_1_7" scope="row" class="gt_row gt_right gt_stub" style="font-family: Courier;">119</th>
<td headers="stub_1_7 sites" class="gt_row gt_left">S10-LPP0</td>
<td headers="stub_1_7 water" class="gt_row gt_right">0.12</td>
<td headers="stub_1_7 lawn_grass" class="gt_row gt_right">0.03</td>
<td headers="stub_1_7 urban" class="gt_row gt_right">0.19</td>
<td headers="stub_1_7 forest" class="gt_row gt_right">0.05</td>
<td headers="stub_1_7 shrub" class="gt_row gt_right">0.00</td>
<td headers="stub_1_7 herbaceous" class="gt_row gt_right">0.05</td>
<td headers="stub_1_7 wetland" class="gt_row gt_right">0.49</td>
<td headers="stub_1_7 ag" class="gt_row gt_right">0.06</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<section id="pre-analysis-data-visualization-graph-1" class="level3">
<h3 class="anchored" data-anchor-id="pre-analysis-data-visualization-graph-1">Pre-analysis data visualization: graph 1</h3>
<p>First, let’s prepare the data. We want to explore the shape of the data for all our covariates. It’s highly recommended that you do this at first because it will help you understand the way your data is distributed (e.g., if it’s centered around a value, or if there are a lot of zeros (0), etc.)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>covariates <span class="ot">&lt;-</span> land_cover <span class="sc">|&gt;</span> </span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># select the following columns </span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(sites, wetland, ag, urban) <span class="sc">|&gt;</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># scale the columns 'wetland', 'ag', 'urban' </span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># mutate() let's us change existing columns or create new ones </span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># across() is a helper function to include several columns to apply the scale() function to</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(<span class="st">'wetland'</span>, <span class="st">'ag'</span>, <span class="st">'urban'</span>), scale)) <span class="sc">|&gt;</span> </span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># mutate_if is a conditional mutate to only transform as vectors all the columns that are numeric</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate_if</span>(is.numeric, as.vector) <span class="sc">|&gt;</span> </span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># pivot_longer to go from wide data to long data </span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(wetland, ag, urban), <span class="co"># the columns we wish to transform from wide to long</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">'covariate'</span>, <span class="co"># the name of the column that will contain wetland, ag, urban </span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">'value'</span>) <span class="sc">|&gt;</span> <span class="co"># the name of column that will have the cell values for each category</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>  <span class="co"># mutate let's us transform the column covariate to a factor </span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">covariate =</span> <span class="fu">factor</span>(covariate))</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(covariates)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  sites    covariate   value
  &lt;chr&gt;    &lt;fct&gt;       &lt;dbl&gt;
1 C04-MBP1 wetland    0.289 
2 C04-MBP1 ag        -0.435 
3 C04-MBP1 urban      0.330 
4 C05-BEA1 wetland    0.573 
5 C05-BEA1 ag         0.0128
6 C05-BEA1 urban     -0.826 </code></pre>
</div>
</div>
<p>Now that our data are prepared, we can graph the covariates that we are interested in (wetland, agriculture, and urbanization) and see how the data are distributed. Remember that we scaled the covariates in the previous step so it makes sense that we can now compare them graphically.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> covariates, <span class="co">#specify our data source</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> covariate, <span class="co">#specify aesthetic mapping by stating we want our covariate categories to be on the y axis</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">x =</span> value)) <span class="co">#specify we want the covariate value to be on the x axis</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="tutorial_uwin_ggplot2_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>You probably noticed that this chunk of code didn’t actually plot any of our data. That’s because the <code>ggplot(data,aes)</code> argument tells R how to structure our plot and where to look for data, but it doesn’t actually plot any data. This will always be the first line of code when you make a new graph.</p>
<p>To actually plot the data, we need to specify a geom, which tells R how to present the data we specified earlier. <em>Note that while we separate arguments within parentheses using commas, we use a plus sign (+) to join together different pieces of code like geoms, themes, etc.</em></p>
<p>To see the distribution of our data values, we’re going to use <code>geom_density_ridges2</code>, which tells R to show us our data as a density estimate.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> covariates, <span class="co">#specify our data source</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> covariate, <span class="co">#specify aesthetic mapping by stating we want our covariate categories to be on the y axis</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">x =</span> value))<span class="sc">+</span> <span class="co">#specify we want the covariate value to be on the x axis</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density_ridges2</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="tutorial_uwin_ggplot2_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Did you notice that we included parentheses after <code>geom_density_ridges2</code> but we didn’t put anything inside the parentheses? We can put additional arguments inside the parentheses that control the aesthetics of the plot type. For example, we can scale the height of these density plots to make sure they don’t overlap one another using the <code>scale</code> argument inside the <code>geom_density_ridges2</code> function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> covariates, <span class="co">#specify our data source</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> covariate, <span class="co">#specify aesthetic mapping by stating we want our covariate categories to be on the y axis</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">x =</span> value))<span class="sc">+</span> <span class="co">#specify we want the covariate value to be on the x axis</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density_ridges2</span>(<span class="at">scale =</span> <span class="fl">0.7</span>) <span class="co">#reduce the height of each density plot to 70% of its original height</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="tutorial_uwin_ggplot2_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>While it’s helpful to see the distribution of our variables, it can be difficult to tell what our mean value is for each variable. We can add the <code>quantile</code> argument to tell R to draw the 25%, 50%, and 75% quantiles to our plot. Alternatively we could use specify different quantiles, such as 2.5% and 97.5%, by using the <code>probs</code> argument: <code>quantile(probs = c(0.025,0.975))</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> covariates, <span class="co">#specify our data source</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> covariate, <span class="co">#specify aesthetic mapping by stating we want our covariate categories to be on the y axis</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">x =</span> value))<span class="sc">+</span> <span class="co">#specify we want the covariate value to be on the x axis</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density_ridges2</span>(<span class="at">scale =</span> <span class="fl">0.7</span>, <span class="co">#reduce the height of each density plot to 70% of its original height</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>                       <span class="at">quantile_lines =</span> <span class="cn">TRUE</span>) <span class="co">#adds quantile lines (default are 25%, 50%, and 75%) </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="tutorial_uwin_ggplot2_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Something important to consider is that the density plots are smoothed estimations. That is, we don’t actually have data points for every location depicted in the plot. To provide a more complete visualization of our data, we can add the actual data points to the plot using the <code>jittered_points</code> argument. If used alone, this plots the points within the density plot itself. We can place the points beneath the density plots using the <code>position</code> argument.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> covariates, <span class="co">#specify our data source</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> covariate, <span class="co">#specify aesthetic mapping by stating we want our covariate categories to be on the y axis</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">x =</span> value))<span class="sc">+</span> <span class="co">#specify we want the covariate value to be on the x axis</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density_ridges2</span>(<span class="at">scale =</span> <span class="fl">0.7</span>, <span class="co">#reduce the height of each density plot to 70% of its original height</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>                       <span class="at">quantile_lines =</span> <span class="cn">TRUE</span>, <span class="co">#adds quantile lines (default are 25%, 50%, and 75%)</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>                       <span class="at">jittered_points =</span> <span class="cn">TRUE</span>, <span class="co">#adds data points to the plot in a scattered pattern so they don't overlap each other </span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>                       <span class="at">position =</span> <span class="st">"raincloud"</span>) <span class="co">#positions the data points below the density plots</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="tutorial_uwin_ggplot2_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Even when the points are spread out (aka jittered), they still overlap and blend to form a blob in areas of high point density. We can overcome this by adjusting the opacity of our graphic components using the <code>alpha</code> argument, where a value of 1 is completely opaque and a value of 0 is completely transparent.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> covariates, <span class="co">#specify our data source</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> covariate, <span class="co">#specify aesthetic mapping by stating we want our covariate categories to be on the y axis</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">x =</span> value))<span class="sc">+</span> <span class="co">#specify we want the covariate value to be on the x axis</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density_ridges2</span>(<span class="at">scale =</span> <span class="fl">0.7</span>, <span class="co">#reduce the height of each density plot to 70% of its original height</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>                       <span class="at">quantile_lines =</span> <span class="cn">TRUE</span>, <span class="co">#adds quantile lines (default are 25%, 50%, and 75%)</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>                       <span class="at">jittered_points =</span> <span class="cn">TRUE</span>, <span class="co">#adds data points to the plot in a scattered pattern so they don't overlap each other </span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>                       <span class="at">position =</span> <span class="st">"raincloud"</span>, <span class="co">#positions the data points below the density plots</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>                       <span class="at">alpha =</span> .<span class="dv">5</span>) <span class="co">#adjust opacity of figure components</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="tutorial_uwin_ggplot2_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Let’s add some color to our plot! There are actually two main color arguments: <code>color</code> and <code>fill</code>. We use <code>fill</code> to define the color of the inside of an object, such as our density plots. Whereas <code>color</code> changes the color of points and lines, such as the outline of our density plots or the data points plotted below.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> covariates, <span class="co">#specify our data source</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> covariate, <span class="co">#specify aesthetic mapping by stating we want our covariate categories to be on the y axis</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">x =</span> value))<span class="sc">+</span> <span class="co">#specify we want the covariate value to be on the x axis</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density_ridges2</span>(<span class="at">scale =</span> <span class="fl">0.7</span>, <span class="co">#reduce the height of each density plot to 70% of its original height</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>                       <span class="at">quantile_lines =</span> <span class="cn">TRUE</span>, <span class="co">#adds quantile lines (default are 25%, 50%, and 75%)</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>                       <span class="at">jittered_points =</span> <span class="cn">TRUE</span>, <span class="co">#adds data points to the plot in a scattered pattern so they don't overlap each other </span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>                       <span class="at">position =</span> <span class="st">"raincloud"</span>, <span class="co">#positions the data points below the density plots</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>                       <span class="at">alpha =</span> .<span class="dv">5</span>, <span class="co">#adjust opacity of figure components</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>                       <span class="at">color =</span> <span class="st">"orange"</span>, <span class="co">#control color of lines and points</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>                       <span class="at">fill =</span> <span class="st">"blue"</span>) <span class="co">#control color of polygons</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="tutorial_uwin_ggplot2_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>In the last plot, we put both the <code>color</code> and <code>fill</code> arguments within <code>geom_density_ridges2</code>. That told R to use the same <code>color</code> and <code>fill</code> for all three of our variables. If we want to use separate colors for each variable, we have to tell R upfront. To do this, we include <code>color</code> and <code>fill</code> as arguments inside the aesthetic mapping argument (<code>aes()</code>) of our initiating argument (<code>ggplot()</code>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> covariates, <span class="co">#specify our data source</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> covariate, <span class="co">#specify aesthetic mapping by stating we want our covariate categories to be on the y axis</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">x =</span> value, <span class="co">#specify we want the covariate value to be</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">color =</span> covariate, <span class="co">#specify the column on which to base coloration</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">fill =</span> covariate))<span class="sc">+</span> <span class="co">#specify the column on which to base coloration</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density_ridges2</span>(<span class="at">scale =</span> <span class="fl">0.7</span>, <span class="co">#reduce the height of each density plot to 70% of its original height</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>                       <span class="at">quantile_lines =</span> <span class="cn">TRUE</span>, <span class="co">#adds quantile lines (default are 25%, 50%, and 75%)</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>                       <span class="at">jittered_points =</span> <span class="cn">TRUE</span>, <span class="co">#adds data points to the plot in a scattered pattern so they don't overlap each other </span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>                       <span class="at">position =</span> <span class="st">"raincloud"</span>, <span class="co">#positions the data points below the density plots</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>                       <span class="at">alpha =</span> .<span class="dv">5</span>) <span class="co">#adjust opacity of figure components</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="tutorial_uwin_ggplot2_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The colors in the previous plot are part of R’s default color palette. This is fine for quick visualizations, but you’ll probably want to choose your own colors. To do this, we use one of the <code>scale</code> commands. Let’s say I want to use the colors of the rainbow. An easy way to do this would be through the <code>scale_fill_manual</code> and <code>scale_color_manual</code> commands, which allow you to set the colors you will use manually.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> covariates, <span class="co">#specify our data source</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> covariate, <span class="co">#specify aesthetic mapping by stating we want our covariate categories to be on the y axis</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">x =</span> value, <span class="co">#specify we want the covariate value to be</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">color =</span> covariate, <span class="co">#specify the column on which to base coloration</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">fill =</span> covariate))<span class="sc">+</span> <span class="co">#specify the column on which to base coloration</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density_ridges2</span>(<span class="at">scale =</span> <span class="fl">0.7</span>, <span class="co">#reduce the height of each density plot to 70% of its original height</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>                       <span class="at">quantile_lines =</span> <span class="cn">TRUE</span>, <span class="co">#adds quantile lines (default are 25%, 50%, and 75%)</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>                       <span class="at">jittered_points =</span> <span class="cn">TRUE</span>, <span class="co">#adds data points to the plot in a scattered pattern so they don't overlap each other </span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>                       <span class="at">position =</span> <span class="st">"raincloud"</span>, <span class="co">#positions the data points below the density plots</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>                       <span class="at">alpha =</span> .<span class="dv">5</span>)<span class="sc">+</span> <span class="co">#adjust opacity of figure components</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"red"</span>,<span class="st">"orange"</span>,<span class="st">"yellow"</span>))<span class="sc">+</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"green"</span>,<span class="st">"blue"</span>,<span class="st">"purple"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="tutorial_uwin_ggplot2_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>While <code>scale_fill_manual</code> and <code>scale_color_manual</code> offer a lot of flexibility in color choice, it can be irritating (and messy) to have to add this to every graph you make. This becomes especially problematic if you need to alter your color scheme, requiring you to go back and change the code for every single graph. Thankfully, we can avoid this headache altogether by saving our own color palette!</p>
<p>When building a color palette, it’s helpful to know a little bit about color theory. However, it’s not necessary information to complete this tutorial. If you’d like a quick lesson, expand the section below. If not, feel free to skip it!</p>
<div class="callout callout-style-default callout-tip callout-titled" title="Color theory">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Color theory
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-3" class="callout-3-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><strong>What is color theory?</strong></p>
<p>Color theory is the study of how different colors work together, and how the use of specific colors and color combinations affect the emotions and perceptions of viewers. As researchers, much of our focus is on collecting and analyzing data. But effective selection of color palettes can be just as important as the story we are trying to tell with our data. Understanding the fundamentals of color theory can quickly and painlessly take your data visualization to the next level.</p>
<p><br></p>
<p>Before we talk about how to pick the best color palette for your data, let’s cover some basic principles of color. When we think of a color, we are often thinking of a <em>hue</em>. Conceptually, hues are raw colors without any alterations. The color wheel below shows twelve familiar hues arranged across the warm-cool spectrum.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="tutorial_uwin_ggplot2_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p><br></p>
<p>Of course, we can make slightly different colors by “mixing” white, grey, or black with each hue. The new colors are called tints, tones, or shades, respectively.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="tutorial_uwin_ggplot2_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p><br></p>
<p>For the rest of this mini-lesson, I’m going to primarily use hues. But be aware that we often rely on tints, tones, and shades to build pleasing and effective color palettes.</p>
<p>While the color wheel’s organization may seem coincidental, it is actually built to allow us to quickly select colors that work well with each other based on their position in the wheel. Depending on what you are trying to communicate, each of these methods of selecting colors has strengths and weaknesses.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="tutorial_uwin_ggplot2_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p><br></p>
<p>Ultimately it is up to you to determine which type of color palette best suits your needs. However, we can broadly lump palettes into two categories: qualitative and quantitative.</p>
<p><br></p>
<p><strong>Qualitative and Quantitative Palettes</strong></p>
<p>While most of our data will be inherently quantitative, that does not mean our color palettes should be! A quantitative color palette implies meaning from the colors themselves, and especially from the distance (aka similarity) between two colors. Thus, analogous color palettes tend to be used in cases where the color of the data itself is meant to communicate meaning. Non-analogous palettes, on the other hand, simply imply that datapoints (or features, or objects, etc.) are distinct from one another. In other words, qualitative color palettes are primarily aesthetic while quantitative palettes have inherent meaning. Consider the plots below. Without knowing what the plots are depicting, can you intuit the story that is being told? Do the stories differ based on the color palette that is used?</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="tutorial_uwin_ggplot2_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Let’s work our way around the plot clockwise starting with the line graph.</p>
<p><strong>1. Line graphs:</strong> Both color palettes work for this figure, but the qualitative palette works better since none of the colors blend with the others. In other words, your eye can easily track all of the lines seperately, whereas they blend together when using the quantitative palette.</p>
<p><strong>2. Bar graphs:</strong> Again, both work (and are aethetically pleasing) in this case. Be careful, however. If you present this at a conference using the quantitative palette and someone asks you “what’s going on with the blue bar?” would you know which bar they were talking about? If you used the qualitative palette, you would know which bar they were refering to with complete certainty.</p>
<p><strong>3. Maps:</strong> These two maps show the counties of Virginia. The colors indicate the area of the county. In the quantitative palette, you can correctly see that counties in the middle of the state (dark) are the largest, while the counties in northeastern portion of the state (light) are smaller. Our brains tend to assume that dark is equal to heavy and large when it comes to data, while light is equal to small. In this case, the colors corroborate that assumption and we can easily (and correctly) read this map. The map using qualitative colors, however, draw your eye to that northeastern pocket and obscure our central counties. More importantly, we have no idea what the relative difference is between each county because the color scale is not continuous. In short, it is much easier to read a trend when the quantitative palette is used rather than the qualitative palette.</p>
<p><strong>4. Likert plots:</strong> The Likert scale runs from one to seven and asks people to rank how much they agree with a statement. Likert scores, as well as any other ranking system, yield data with an inherent order. As a result, the qualitative palette is once again more intuitive than the qualitative palette.</p>
<p><strong>5. Pie charts:</strong> In general, it’s best practice not to use a pie chart to visualize your data since humans have a difficult time discerning area of circles. Here, the pie charts use the exact same data as the bar graphs. It is generally easier for people to see the difference between the larger two bars in the graph than it is for people to see the difference between the larger two slices of pie. Regardless, this is an instance where qualitative colors do a better job than quantitative colors since pie charts break data up by categories. There is (presumably) no inherent relationship beween categories, and thus our use of color is primarily to differentiate categories rather than imply a relationship between them.</p>
<p><br></p>
<p><strong>Mixing Qualitative and Quantitative Palettes</strong></p>
<p>There are some instance where using both types of palettes makes sense. In the last section, we discussed how the colors in a pie chart are mean to primarily separate data groups rather than imply a relationship between them. However, if you have sub-categories of data, you may wish to use colors to imply that each of those subcategories has a relationship to the larger category. In this instance, you can use a qualitative palette for the major categories, but quantitative palettes based off the qualitative colors to further separate data. For instance, the example below shows three subgroups in the blue category, two in the red, etc.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="tutorial_uwin_ggplot2_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p><br></p>
<p>You may also want to use color to highlight one particular aspect of your data. In that case, you can use a subtle quantitative palette to mute the background data, while pulling an accent color from a qualitative palette to highlight your main finding.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="tutorial_uwin_ggplot2_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p><br></p>
<p>In the end, relying on color theory can help you make effective visualizations that correctly communicate your findings. But remember, these are just suggestions. Sometimes it’s okay to bend the rules! Also, if you don’t have time to create your own custom palette using color theory, feel free to use one of the tried-and-true pre-made palettes available in packages like <code>viridis</code> or <code>colorspace</code>.</p>
</div>
</div>
</div>
<p>We are going to be using color to differentiate categories so we will create a qualitative color palette. You could also use a predefined color palette from packages like <code>viridis</code> or <code>colorspace</code>.</p>
<p>Previously, we simply used the name of a color in quotes. R recognizes 657 color names, so we’re not short on color choices. But we retain more control of our color choices if we use A HEX code instead. HEX codes are simply special codes for a specific color. This approach gives us a lot more flexibility than simply writing “blue.” If you need help translating a color into a HEX code, <a href="https://www.google.com/search?q=google+color+picker">Google has a built in color picker</a> that allows you to select a color from a map and copy the HEX code.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>my_colors <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'#222f5b'</span>, <span class="st">'#5d5d5d'</span>, <span class="st">'#946b2d'</span>, <span class="st">'#4f3b3b'</span>) <span class="co">#create a vector containing our specified colors</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now instead of typing out a vector of colors, we simply provide our named color vector to <code>scale_fill_manual</code> or <code>scale_color_manual</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> covariates, <span class="co">#specify our data source</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> covariate, <span class="co">#specify aesthetic mapping by stating we want our covariate categories to be on the y axis</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">x =</span> value, <span class="co">#specify we want the covariate value to be</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">color =</span> covariate, <span class="co">#specify the column on which to base coloration</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">fill =</span> covariate))<span class="sc">+</span> <span class="co">#specify the column on which to base coloration</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density_ridges2</span>(<span class="at">scale =</span> <span class="fl">0.7</span>, <span class="co">#reduce the height of each density plot to 70% of its original height</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>                       <span class="at">quantile_lines =</span> <span class="cn">TRUE</span>, <span class="co">#adds quantile lines (default are 25%, 50%, and 75%)</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>                       <span class="at">jittered_points =</span> <span class="cn">TRUE</span>, <span class="co">#adds data points to the plot in a scattered pattern so they don't overlap each other </span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>                       <span class="at">position =</span> <span class="st">"raincloud"</span>, <span class="co">#positions the data points below the density plots</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>                       <span class="at">alpha =</span> .<span class="dv">5</span>)<span class="sc">+</span> <span class="co">#adjust opacity of figure components</span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> my_colors)<span class="sc">+</span> <span class="co">#feed R our custom color palette</span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> my_colors) <span class="co">#feed R our custom color palette</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="tutorial_uwin_ggplot2_files/figure-html/unnamed-chunk-21-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>You might have noticed that all of our plots so far have included a grey background with a white grid. You may have also noticed a legend that, although not incorrect, is probably not something you would want to include in a publication.</p>
<p>To remove the background, we will use the <code>theme</code> command, which has a number of arguments that specify how the non-data components of the plot are drawn. We could spend an entire day going over all the components you can adjust via <code>theme</code>. Instead, we’ll cover a few and let you <a href="https://ggplot2.tidyverse.org/reference/theme.html">explore the rest on your own.</a> There are also <a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">several pre-set themes</a> that you can use and/or tweak. We’ll be building off of <code>theme_classic</code> for our plot.</p>
<p>To change the legend, we use the <code>key_glyph</code> argument inside of our <code>geom</code>. There are also <a href="https://ggplot2.tidyverse.org/reference/draw_key.html">many variations</a> we could discuss here. Instead, we’re just going to show one.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> covariates, <span class="co">#specify our data source</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> covariate, <span class="co">#specify aesthetic mapping by stating we want our covariate categories to be on the y axis</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">x =</span> value, <span class="co">#specify we want the covariate value to be</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">color =</span> covariate, <span class="co">#specify the column on which to base coloration</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">fill =</span> covariate))<span class="sc">+</span> <span class="co">#specify the column on which to base coloration</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density_ridges2</span>(<span class="at">scale =</span> <span class="fl">0.7</span>, <span class="co">#reduce the height of each density plot to 70% of its original height</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>                       <span class="at">quantile_lines =</span> <span class="cn">TRUE</span>, <span class="co">#adds quantile lines (default are 25%, 50%, and 75%)</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>                       <span class="at">jittered_points =</span> <span class="cn">TRUE</span>, <span class="co">#adds data points to the plot in a scattered pattern so they don't overlap each other </span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>                       <span class="at">position =</span> <span class="st">"raincloud"</span>, <span class="co">#positions the data points below the density plots</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>                       <span class="at">alpha =</span> .<span class="dv">5</span>, <span class="co">#adjust opacity of figure components</span></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>                       <span class="at">key_glyph =</span> draw_key_polygon</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>  )<span class="sc">+</span> <span class="co">#changes the legend symbol to simply a polygon (box) of color</span></span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> my_colors)<span class="sc">+</span> <span class="co">#feed R our custom color palette</span></span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> my_colors)<span class="sc">+</span> <span class="co">#feed R our custom color palette</span></span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>()<span class="sc">+</span> <span class="co"># we are modifying some of the elements of theme_classic. Note that you do not include additional arguments within the parentheses of a pre-set theme!</span></span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">'white'</span>), <span class="co">#change the background from grey to white (you could also use fill = "transparent")</span></span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">'bottom'</span>, <span class="co">#tells R to put out legend at the bottom of the plot (you could also use legend.position = "none" to remove the legend)</span></span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.title =</span> <span class="fu">element_blank</span>(), <span class="co">#element_blank tells R to ignore this component of the graph.</span></span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">'bold'</span>, <span class="co">#makes text of our x axis title bold</span></span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a>                                <span class="at">size =</span> <span class="dv">14</span>, <span class="co">#adjust size of x axis title</span></span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a>                                <span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="co">#adjust the horizontal position of x axis title (places it in the middle, or half (.5) way)</span></span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a>                                <span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">t=</span><span class="fl">0.5</span>, <span class="co">#adjust space around text</span></span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a>                                                <span class="at">unit =</span> <span class="st">'cm'</span>)), <span class="co">#specify unit of value provided above</span></span>
<span id="cb16-25"><a href="#cb16-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">'bold'</span>, <span class="co">#makes text of our y axis title bold</span></span>
<span id="cb16-26"><a href="#cb16-26" aria-hidden="true" tabindex="-1"></a>                                <span class="at">size =</span> <span class="dv">14</span>, <span class="co">#adjust size of y axis title</span></span>
<span id="cb16-27"><a href="#cb16-27" aria-hidden="true" tabindex="-1"></a>                                <span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="co">#adjust the horizontal position of x axis title (places it in the middle, or half (.5) way)</span></span>
<span id="cb16-28"><a href="#cb16-28" aria-hidden="true" tabindex="-1"></a>                                <span class="at">angle =</span> <span class="dv">90</span>, <span class="co">#orients y axis title at a 90 degree angle so it runs paralell to the axis</span></span>
<span id="cb16-29"><a href="#cb16-29" aria-hidden="true" tabindex="-1"></a>                                <span class="at">margin =</span>  <span class="fu">margin</span>(<span class="at">r=</span><span class="fl">0.5</span>, <span class="co">#adjust space around text</span></span>
<span id="cb16-30"><a href="#cb16-30" aria-hidden="true" tabindex="-1"></a>                                                 <span class="at">unit =</span> <span class="st">'cm'</span>)),<span class="co">#specify unit of value provided above</span></span>
<span id="cb16-31"><a href="#cb16-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>),  <span class="co">#adjust size of text of actual values (covariates and numbers)</span></span>
<span id="cb16-32"><a href="#cb16-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.margin =</span> <span class="fu">margin</span>(<span class="fl">0.5</span>, <span class="fl">0.5</span>, <span class="fl">0.5</span>, <span class="fl">0.5</span>, <span class="at">unit =</span> <span class="st">'cm'</span>), <span class="co">#adjust white space around the plot</span></span>
<span id="cb16-33"><a href="#cb16-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>) <span class="co">#adjust text size of the legend (aka key)</span></span>
<span id="cb16-34"><a href="#cb16-34" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="tutorial_uwin_ggplot2_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="correlation-plot-graph-2" class="level3">
<h3 class="anchored" data-anchor-id="correlation-plot-graph-2">Correlation plot: graph 2</h3>
<p>Now that we know the distribution of our covariates, we also have to know if any of them are correlated. Let’s create a plot that visualizes the Pearson correlation coefficients.</p>
<p>First, we’ll create a correlation matrix using the <code>cor</code> function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>cor_mat <span class="ot">&lt;-</span> <span class="fu">cor</span>(land_cover[,<span class="fu">c</span>(<span class="st">"ag"</span>, <span class="st">"urban"</span>, <span class="st">"wetland"</span>)]) <span class="co">#create correlation matrix for our three variables</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>cor_mat <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="at">x =</span> cor_mat,</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">digits =</span> <span class="dv">2</span>) <span class="co">#round values to 2 decimal places</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>cor_mat</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>           ag urban wetland
ag       1.00 -0.46    0.28
urban   -0.46  1.00   -0.72
wetland  0.28 -0.72    1.00</code></pre>
</div>
</div>
<p>Now let’s create our correlation plot. For this graph, we will be using an auxilary package that uses <code>ggplot2</code> but has its own commands for plotting correlation plot called <code>ggcorrplot</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Note that we type "ggcorrplot::" before the command so R knows that our command is from a specific package. This is not always needed, but good practice.</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>ggcorrplot<span class="sc">::</span><span class="fu">ggcorrplot</span>(cor_mat) <span class="co">#feed our correlation matrix to the plot</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="tutorial_uwin_ggplot2_files/figure-html/unnamed-chunk-24-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Since we only specified our data, but not any additional arguments, the above plot used the default settings for this type of plot. Under the default settings, we can see that warmer colors indicate strong positive correlation between variables (correlation coeficients closer to 1), whereas cooler colors indicate strong negative correlation between variables (correlation coeficients closer to -1). White indicates no correlation exists between two variables.</p>
<p>Generally when we are looking into correlation we want to flag any pair of variables with a correlation coefficient above a pre-determined threshold (usually 0.7). Unfortunately most of us aren’t able to exactly match the color of a square to its position in the legend. Instead, we can add labels to the plot so our eyes quickly can scan for colors that indicate we are approaching our threshold, then read the exact correlation coefficients for those pairs of covariates.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>ggcorrplot<span class="sc">::</span><span class="fu">ggcorrplot</span>(cor_mat,<span class="co">#specify our data</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>                       <span class="at">lab =</span> <span class="cn">TRUE</span>, <span class="co">#tell R to include the correlation coefficient (as a label)</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>                       <span class="at">lab_col =</span> <span class="st">"black"</span>, <span class="co">#specify the color of our labels</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>                       <span class="at">lab_size =</span> <span class="dv">6</span>) <span class="co">#specify the text size of our labels</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="tutorial_uwin_ggplot2_files/figure-html/unnamed-chunk-25-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>You may have noticed that the upper left half of the plot is exactly the same as the lower right half of the plot. That’s because our variables are arranged in the exact same way on both the x and y axes.</p>
<p>In truth, you will probably never try to publish a correlation plot so if this format works for you, great! But it seeing duplicated information is overwhelming, we can add <code>type = "lower"</code> to reorder the x and y axes. In doing so, we remove the diagonal of perfect correlation, and erase the mirrored halves. Again, this isn’t necessary but can help make interpreting the plot easier.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>ggcorrplot<span class="sc">::</span><span class="fu">ggcorrplot</span>(cor_mat,<span class="co">#specify our data</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>                       <span class="at">lab =</span> <span class="cn">TRUE</span>, <span class="co">#tell R to include the correlation coefficient (as a label)</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>                       <span class="at">lab_col =</span> <span class="st">"black"</span>, <span class="co">#specify the color of our labels</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>                       <span class="at">lab_size =</span> <span class="dv">6</span>, <span class="co">#specify the text size of our labels</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>                       <span class="at">type =</span> <span class="st">"lower"</span>)<span class="co">#re-order x and y axes and remove duplicated information</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="tutorial_uwin_ggplot2_files/figure-html/unnamed-chunk-26-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Again, since you will never try to publish this plot, the default colors are probably sufficient. But for the sake of learning, let’s change our color palette.</p>
<p>Several packages offer pre-defined palettes, such as, <code>viridis</code>,<code>paletteer</code>, <code>RColorBrewer</code>, and <code>colorspace</code>. For this example we’re going to work with <code>RColorBrewer</code>. You can explore the 97 palettes offered by <code>colorspace</code> by expanding the section below, or you can trust we’re picking a good palette!</p>
<div class="callout callout-style-default callout-note callout-titled" title="Pre-set color palettes">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-4-contents" aria-controls="callout-4" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Pre-set color palettes
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-4" class="callout-4-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="cell-output-display">
<p><img src="tutorial_uwin_ggplot2_files/figure-html/unnamed-chunk-27-1.png" class="img-fluid" width="2880"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>List of 2
 $ aspect.ratio   : num 8.08
 $ legend.position: chr "none"
 - attr(*, "class")= chr [1:2] "theme" "gg"
 - attr(*, "complete")= logi FALSE
 - attr(*, "validate")= logi TRUE</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>In this case, we need to use a sequential palette or a diverging palette because we want to highlight extreme values and bring less attention to smaller values.</p>
<p>For this example, we’ll use the diverging color palette ‘Vik’ because it is a standard divergent color palette. This means our correlation plot will have white for values close to 0 (aka non-correlated) and increase in color intensity as correlation increases.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>ggcorrplot<span class="sc">::</span><span class="fu">ggcorrplot</span>(cor_mat,<span class="co">#specify our data</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>                       <span class="at">lab =</span> <span class="cn">TRUE</span>, <span class="co">#tell R to include the correlation coefficient (as a label)</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>                       <span class="at">lab_col =</span> <span class="st">"black"</span>, <span class="co">#specify the color of our labels</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>                       <span class="at">lab_size =</span> <span class="dv">6</span>, <span class="co">#specify the text size of our labels</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>                       <span class="at">type =</span> <span class="st">"lower"</span>)<span class="sc">+</span><span class="co">#re-order x and y axes and remove duplicated information</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_continuous_diverging</span>(<span class="at">palette =</span> <span class="st">"Vik"</span>) <span class="co">#specify color palette from colorspace on a continuous gradient</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="tutorial_uwin_ggplot2_files/figure-html/unnamed-chunk-28-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Alternatively, we could build our own color palette creating a named vector of colors which represent our extreme, low, and opposite extreme values.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>my_ramp <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'#bf0d3e'</span>, <span class="st">'white'</span> , <span class="st">'#16537e'</span>)</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>ggcorrplot<span class="sc">::</span><span class="fu">ggcorrplot</span>(cor_mat,<span class="co">#specify our data</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>                       <span class="at">lab =</span> <span class="cn">TRUE</span>, <span class="co">#tell R to include the correlation coefficient (as a label)</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>                       <span class="at">lab_col =</span> <span class="st">"black"</span>, <span class="co">#specify the color of our labels</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>                       <span class="at">lab_size =</span> <span class="dv">6</span>, <span class="co">#specify the text size of our labels</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>                       <span class="at">type =</span> <span class="st">"lower"</span>,<span class="co">#re-order x and y axes and remove duplicated information</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>                       <span class="at">col =</span> my_ramp) <span class="co">#feed R my custom palette</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="tutorial_uwin_ggplot2_files/figure-html/unnamed-chunk-29-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Finally, let’s change a few components of the theme just for practice</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>ggcorrplot<span class="sc">::</span><span class="fu">ggcorrplot</span>(cor_mat,<span class="co">#specify our data</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>                       <span class="at">lab =</span> <span class="cn">TRUE</span>, <span class="co">#tell R to include the correlation coefficient (as a label)</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>                       <span class="at">lab_col =</span> <span class="st">"black"</span>, <span class="co">#specify the color of our labels</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>                       <span class="at">lab_size =</span> <span class="dv">6</span>, <span class="co">#specify the text size of our labels</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>                       <span class="at">type =</span> <span class="st">"lower"</span>,<span class="co">#re-order x and y axes and remove duplicated information</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>                       <span class="at">col =</span> my_ramp)<span class="sc">+</span> <span class="co">#feed R my custom palette</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">'bold'</span>, <span class="co">#Bold the legend title</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>                                    </span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">hjust =</span> <span class="fl">0.5</span>),  <span class="co">#Center legend title: 0=left, 1=right</span></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">'bold'</span>, <span class="co">#Bold the axis text (variable names)</span></span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>                                   </span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">angle =</span> <span class="dv">0</span>,  <span class="co"># Control the angle of the x-axis labels so they aren't angled</span></span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>                                   </span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="co">#Center the x-axis labels: 0=left, 1=right      </span></span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a>                                   </span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">size =</span> <span class="dv">12</span>, <span class="co">#Font size for x-axis labels  </span></span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a>                                   </span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">color =</span> <span class="st">"black"</span>), <span class="co">#Color for x-axis labels  </span></span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">face=</span><span class="st">'bold'</span>,</span>
<span id="cb25-20"><a href="#cb25-20" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">size =</span> <span class="dv">12</span>,</span>
<span id="cb25-21"><a href="#cb25-21" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">color =</span> <span class="st">'black'</span>), </span>
<span id="cb25-22"><a href="#cb25-22" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb25-23"><a href="#cb25-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.margin =</span> <span class="fu">margin</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="at">unit =</span> <span class="st">'cm'</span>))<span class="sc">+</span> <span class="co">#Margins around the plot, order is top, right, bottom, left, remember 'trouble'</span></span>
<span id="cb25-24"><a href="#cb25-24" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb25-25"><a href="#cb25-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_legend</span>(<span class="at">title =</span> <span class="st">'Correlation'</span>)) <span class="co">#With guides, you can modify the legend title, or else it automatically takes the name of the column 'value'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="tutorial_uwin_ggplot2_files/figure-html/unnamed-chunk-30-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="post-analysis-data-visualization-prediction-plots-graph-3" class="level3">
<h3 class="anchored" data-anchor-id="post-analysis-data-visualization-prediction-plots-graph-3">Post-analysis data visualization: prediction plots graph 3</h3>
<p>Graphs 1 and 2 were visualizations of raw data that are common to evaluate before fitting a model. Graphs 3 and 4 will now teach you how to visualize the results of your model. For consistency’s sake, we will be using the output from the first occupancy tutorial. We won’t go over or show the code here. Rather, we’re assuming you have the output handy.</p>
<p>We will begin by plotting a response plot, which shows the relationship between the dependent variable and an independent variable. To build this plot, we need to create a prediction data frame that tells us what our dependent variable’s value is over a range of possible independent variable values. Make sure your columns have the same names as the ones you included in your model.</p>
<p>First, let’s explore the range of our covariates, both scaled and non-scaled.</p>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: left; font-weight: bold;">covariates</th>
<th data-quarto-table-cell-role="th" style="text-align: right; font-weight: bold;">min</th>
<th data-quarto-table-cell-role="th" style="text-align: right; font-weight: bold;">max</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">ag</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.16</td>
</tr>
<tr class="even">
<td style="text-align: left;">urban</td>
<td style="text-align: right;">0.16</td>
<td style="text-align: right;">1.00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">wetland</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.38</td>
</tr>
<tr class="even">
<td style="text-align: left;">ag_scale</td>
<td style="text-align: right;">-0.35</td>
<td style="text-align: right;">5.30</td>
</tr>
<tr class="odd">
<td style="text-align: left;">urban_scale</td>
<td style="text-align: right;">-2.45</td>
<td style="text-align: right;">0.99</td>
</tr>
<tr class="even">
<td style="text-align: left;">wetland_scale</td>
<td style="text-align: right;">-0.50</td>
<td style="text-align: right;">3.77</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>Now, we want to use our real values (unscaled) to make to create a sequence of (scaled) values that we can use to make predictions on.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Specify the range of each our variables (See table above)</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>ag_range <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.16</span>)</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>urban_range <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">0.16</span>, <span class="dv">1</span>)</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>wetland_range <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.38</span>)</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>new_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>( <span class="co">#Create a prediction data frame</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">ag_scale =</span> <span class="fu">seq</span>(ag_range[<span class="dv">1</span>], ag_range[<span class="dv">2</span>], <span class="at">length.out =</span> <span class="dv">100</span>), <span class="co">#create 100 agriculture values that range between the smallest and largest values found in our dataset</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">urban_scale =</span> <span class="dv">0</span>, <span class="co">#Because we are only evaluating the effect of one variable at a time, hold this at zero for all 100 values</span></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">wetland_scale =</span> <span class="dv">0</span> <span class="co">#Because we are only evaluating the effect of one variable at a time, hold this at zero for all 100 values</span></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>dat_pred <span class="ot">&lt;-</span> new_df <span class="co">#Rename our data frame</span></span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>dat_pred<span class="sc">$</span>ag_scale <span class="ot">&lt;-</span> (dat_pred<span class="sc">$</span>ag_scale <span class="sc">-</span> <span class="fu">mean</span>(siteCovs_df<span class="sc">$</span>ag)) <span class="sc">/</span> <span class="fu">sd</span>(siteCovs_df<span class="sc">$</span>ag) <span class="co">#Scale agriculture values by mean-centering and dividing by the standard deviation</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now we are ready to start making predictions with one of our covariates while the other ones remain at 0.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># using the function predict in package unmarked we put our model m1 and </span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="co"># specify type as state for occupancy. We would use 'det' for detection, </span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>pred_ag <span class="ot">&lt;-</span> unmarked<span class="sc">::</span><span class="fu">predict</span>(m1, <span class="at">type =</span> <span class="st">'state'</span>, <span class="at">newdata =</span> dat_pred) </span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Now with our predicted data frame we will create a new column called ag which </span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a><span class="co"># will have the scaled covariate we want to make predictions with</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a><span class="co"># then we simply relocate that column to be the first column </span></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>pred_ag <span class="ot">&lt;-</span> pred_ag <span class="sc">|&gt;</span> </span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ag =</span> new_df<span class="sc">$</span>ag_scale) <span class="sc">|&gt;</span> </span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(ag)</span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(pred_ag)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>           ag Predicted         SE     lower     upper
1 0.000000000 0.5854279 0.06678247 0.4515990 0.7077341
2 0.001616162 0.5889485 0.06493721 0.4585662 0.7079310
3 0.003232323 0.5924600 0.06346754 0.4647960 0.7087535
4 0.004848485 0.5959621 0.06239414 0.4702352 0.7102373
5 0.006464646 0.5994544 0.06173126 0.4748441 0.7124050
6 0.008080808 0.6029367 0.06148531 0.4785995 0.7152636</code></pre>
</div>
</div>
<p>Let’s start making plots! We’ll start with plotting the effect of agriculture.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(pred_ag, <span class="co">#Specify data</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> ag, <span class="at">y =</span> Predicted))<span class="sc">+</span> <span class="co">#Specify aesthetic mapping</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">linewidth =</span> <span class="dv">1</span>, <span class="co">#Specify the width of the line</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">color =</span> <span class="st">'black'</span>) <span class="co">#Specify the color of the line</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="tutorial_uwin_ggplot2_files/figure-html/unnamed-chunk-35-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>We’re off to a good start! Notice that we used a new geom here: <code>geom_line()</code>. While this geom shows us our predicted outcome using a point estimate, it doesn’t show us uncertainty. To add our 95% confidence intervals, we use <code>geom_ribbon()</code>, which is similar to <code>geom_line()</code> but adds a polygon to the plot around the line.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(pred_ag, <span class="co">#Specify data</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> ag, <span class="at">y =</span> Predicted))<span class="sc">+</span> <span class="co">#Specify aesthetic mapping</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">linewidth =</span> <span class="dv">1</span>, <span class="co">#Specify the width of the line</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">color =</span> <span class="st">'black'</span>)<span class="sc">+</span> <span class="co">#Specify the color of the line</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_ribbon</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> lower, <span class="co">#Specify the column that holds the lower estimate of our 95%CI</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>                  <span class="at">ymax =</span> upper), <span class="co">#Specify the column that holds the upper estimate of our 95%CI</span></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>              <span class="at">fill =</span> <span class="st">'#B8BADD'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="tutorial_uwin_ggplot2_files/figure-html/unnamed-chunk-36-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Uh oh…when we added our confidence interval it covered up our line. That’s because order matters <em>for graphical objects only.</em> That means we could specify the theme in the first line of code or the last line of code and it wouldn’t make a difference. But when it comes to objects being plotted within the graph, the first object listed in the code is the first object plotted in the graph. In the last graph, we plotted the line before the ribbon. As a result, the ribbon was placed on top of the line. We can switch this around by re-ordering our code to make the ribbon come first and the line come second.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(pred_ag, <span class="co">#Specify data</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> ag, <span class="at">y =</span> Predicted))<span class="sc">+</span> <span class="co">#Specify aesthetic mapping</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_ribbon</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> lower, <span class="co">#Specify the column that holds the lower estimate of our 95%CI</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>                  <span class="at">ymax =</span> upper), <span class="co">#Specify the column that holds the upper estimate of our 95%CI</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>              <span class="at">fill =</span> <span class="st">'#B8BADD'</span>)<span class="sc">+</span></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">linewidth =</span> <span class="dv">1</span>, <span class="co">#Specify the width of the line</span></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">color =</span> <span class="st">'black'</span>) <span class="co">#Specify the color of the line</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="tutorial_uwin_ggplot2_files/figure-html/unnamed-chunk-37-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Now that looks better! Now that our graphic objects look good, let’s adjust the axes.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(pred_ag, <span class="co">#Specify data</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> ag, <span class="at">y =</span> Predicted))<span class="sc">+</span> <span class="co">#Specify aesthetic mapping</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_ribbon</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> lower, <span class="co">#Specify the column that holds the lower estimate of our 95%CI</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>                  <span class="at">ymax =</span> upper), <span class="co">#Specify the column that holds the upper estimate of our 95%CI</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>              <span class="at">fill =</span> <span class="st">'#B8BADD'</span>)<span class="sc">+</span></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">linewidth =</span> <span class="dv">1</span>, <span class="co">#Specify the width of the line</span></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">color =</span> <span class="st">'black'</span>)<span class="sc">+</span> <span class="co">#Specify the color of the line</span></span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">'Proportion of Agriculture'</span>)<span class="sc">+</span> <span class="co">#xlab changes the x-axis title </span></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">'Occupancy'</span>)<span class="sc">+</span> <span class="co">#ylab changes the x-axis title </span></span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits=</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>), <span class="co">#set the y axis to go between zero and one</span></span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a>                     <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="at">by =</span><span class="fl">0.2</span>)) <span class="co">#set the y axis to show an axis tick in increments of 0.2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="tutorial_uwin_ggplot2_files/figure-html/unnamed-chunk-38-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Lastly, let’s adjust our theme. Particularly, let’s get rid of the grey background and add some horizontal lines that will help us see changes on the y axis a bit easier.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>ag_plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(pred_ag, <span class="co">#Specify data</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">aes</span>(<span class="at">x =</span> ag, <span class="at">y =</span> Predicted))<span class="sc">+</span> <span class="co">#Specify aesthetic mapping</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_ribbon</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> lower, <span class="co">#Specify the column that holds the lower estimate of our 95%CI</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>                  <span class="at">ymax =</span> upper), <span class="co">#Specify the column that holds the upper estimate of our 95%CI</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>              <span class="at">fill =</span> <span class="st">'#B8BADD'</span>)<span class="sc">+</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">linewidth =</span> <span class="dv">1</span>, <span class="co">#Specify the width of the line</span></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">color =</span> <span class="st">'black'</span>)<span class="sc">+</span> <span class="co">#Specify the color of the line</span></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">'Proportion of Agriculture'</span>)<span class="sc">+</span> <span class="co">#xlab changes the x-axis title </span></span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">'Occupancy'</span>)<span class="sc">+</span> <span class="co">#ylab changes the x-axis title </span></span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits=</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>), <span class="co">#set the y axis to go between zero and one</span></span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a>                     <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="at">by =</span><span class="fl">0.2</span>))<span class="sc">+</span> <span class="co">#set the y axis to show an axis tick in increments of 0.2</span></span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>()<span class="sc">+</span> <span class="co">#Let's modify a few elements of theme_classic </span></span>
<span id="cb33-14"><a href="#cb33-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb33-15"><a href="#cb33-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.minor.y =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">'gray70'</span>, <span class="co">#Change the color of the horizontal grid lines on y axis</span></span>
<span id="cb33-16"><a href="#cb33-16" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">size =</span> <span class="fl">0.5</span>), <span class="co">#Control the width of the line </span></span>
<span id="cb33-17"><a href="#cb33-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.major.y =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">'gray70'</span>, <span class="co">#Change the color of the horizontal grid lines on y axis</span></span>
<span id="cb33-18"><a href="#cb33-18" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">size =</span> <span class="fl">0.5</span>), <span class="co">#Control the width of the line </span></span>
<span id="cb33-19"><a href="#cb33-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.ticks.x =</span> <span class="fu">element_line</span>(<span class="at">size =</span> <span class="dv">1</span>), <span class="co">#Change the size (width) of each tick on x-axis (ticks are the small segments on the axis that denote changes in the axis value)</span></span>
<span id="cb33-20"><a href="#cb33-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.ticks.length.x =</span> <span class="fu">unit</span>(<span class="fl">0.2</span>, <span class="st">'cm'</span>), <span class="co">#Change the length of the ticks on x-axis </span></span>
<span id="cb33-21"><a href="#cb33-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.ticks.y =</span> <span class="fu">element_blank</span>(), <span class="co">#Use element_blank to remove tick lines on y-axis </span></span>
<span id="cb33-22"><a href="#cb33-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.line.x =</span> <span class="fu">element_line</span>(<span class="at">size=</span><span class="fl">0.75</span>),  <span class="co">#Size (line width) of the x-axis line above the ticks</span></span>
<span id="cb33-23"><a href="#cb33-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.line.y =</span> <span class="fu">element_blank</span>(), <span class="co">#Use element_blank to remove the y-axis line </span></span>
<span id="cb33-24"><a href="#cb33-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">'black'</span>, <span class="co">#Control the color of all text (numbers) on the x axis</span></span>
<span id="cb33-25"><a href="#cb33-25" aria-hidden="true" tabindex="-1"></a>                               <span class="at">size =</span> <span class="dv">10</span>, <span class="co">#Control the font size of text on the x axis (note that this does not directly equate to 10-point font in a word processor)</span></span>
<span id="cb33-26"><a href="#cb33-26" aria-hidden="true" tabindex="-1"></a>                               <span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">t=</span><span class="fl">0.3</span>, <span class="co">#Use margin(t=) for the x-axis text to change the distance above numbers </span></span>
<span id="cb33-27"><a href="#cb33-27" aria-hidden="true" tabindex="-1"></a>                                               <span class="at">unit=</span><span class="st">'cm'</span>)), <span class="co">#specify the unit for the above-listed margin size</span></span>
<span id="cb33-28"><a href="#cb33-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">'black'</span>, <span class="co">#See comments for x axis</span></span>
<span id="cb33-29"><a href="#cb33-29" aria-hidden="true" tabindex="-1"></a>                               <span class="at">size =</span> <span class="dv">10</span>, <span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">r=</span><span class="fl">0.3</span>, </span>
<span id="cb33-30"><a href="#cb33-30" aria-hidden="true" tabindex="-1"></a>                                                          <span class="at">unit=</span><span class="st">'cm'</span>)), </span>
<span id="cb33-31"><a href="#cb33-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>, <span class="co">#Adjust font size of x axis title</span></span>
<span id="cb33-32"><a href="#cb33-32" aria-hidden="true" tabindex="-1"></a>                                <span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">t=</span><span class="fl">0.7</span>, <span class="at">unit=</span><span class="st">'cm'</span>)), <span class="co">#Change white space around the x axis title</span></span>
<span id="cb33-33"><a href="#cb33-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>, <span class="co">#Adjust font size of y axis title</span></span>
<span id="cb33-34"><a href="#cb33-34" aria-hidden="true" tabindex="-1"></a>                                <span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">r=</span><span class="fl">0.7</span>, <span class="at">unit=</span><span class="st">'cm'</span>)), <span class="co">#Change white space around the y axis title</span></span>
<span id="cb33-35"><a href="#cb33-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">'italic'</span>, <span class="co">#Set text in plot caption to be italicized</span></span>
<span id="cb33-36"><a href="#cb33-36" aria-hidden="true" tabindex="-1"></a>                                <span class="at">size =</span> <span class="dv">10</span>, <span class="co">#Set font size</span></span>
<span id="cb33-37"><a href="#cb33-37" aria-hidden="true" tabindex="-1"></a>                                <span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">t=</span><span class="dv">1</span>, <span class="at">unit =</span> <span class="st">'cm'</span>)), <span class="co">#Control surrounding white space</span></span>
<span id="cb33-38"><a href="#cb33-38" aria-hidden="true" tabindex="-1"></a>    <span class="co"># change the outer margin of the plot</span></span>
<span id="cb33-39"><a href="#cb33-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.margin =</span> <span class="fu">margin</span>(<span class="fl">0.7</span>,<span class="fl">0.7</span>,<span class="fl">0.7</span>,<span class="fl">0.7</span>, <span class="at">unit=</span><span class="st">'cm'</span>) <span class="co">#Control white space around the entire plot</span></span>
<span id="cb33-40"><a href="#cb33-40" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb33-41"><a href="#cb33-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-42"><a href="#cb33-42" aria-hidden="true" tabindex="-1"></a>ag_plot</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="tutorial_uwin_ggplot2_files/figure-html/unnamed-chunk-39-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>This looks great! A quick note on the horizontal lines behind the plot: <code>theme_classic()</code> removes all gridlines and colored background panels. In this case, we opted to add them back in by using the <code>panel.grid.minor.y</code> and <code>panel.grid.major.y</code>arguments. If you scroll up to look at the grey background in our plot before we adjusted the theme, you’ll notice that the horizontal lines consist of alternating thicker and thinner lines. The difference is subtle, but the thicker lines are the major lines, while the thinner lines are the minor lines. By using the <code>size</code> argument in both <code>panel.grid.minor.y</code> and <code>panel.grid.major.y</code>, we removed this difference and effectively made both types of lines into the same type of line (aesthetically). Despite looking the same, the code requires that we handle them separately.</p>
<p>You may have noticed that we started our code slightly differently this time. Instead of simply writing the code for a plot, we created a named object using the assignment operator. That is, instead of this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data,aes)<span class="sc">+</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom</span>()<span class="sc">+</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>we did this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>graph_name <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(data,aes)<span class="sc">+</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom</span>()<span class="sc">+</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Naming our plot allows us to save it in our environment for later use. One advantage of this is that we can create several plots, then put them together by calling them by name.</p>
<p>For instance, our occupancy model has three variables, but we only made a graph for one of them and called it <code>ag_plot</code>. To show how we would put several plots together, we’ll work with plots for the other two variables called <code>wetland_plot</code> and <code>urban_plot</code>.</p>
<p>To put these three plots together we will use the <code>cowplot</code> package, which allows us to treat the plotting space as a canvas, and each of our graphical objects as components of a collage.</p>
<p>The easiest way to arrange plots is to use the <code>plot_grid</code> function, which arranges your plots automatically.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(cowplot)</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>all.plots <span class="ot">&lt;-</span> <span class="fu">plot_grid</span>(ag_plot, </span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>          urban_plot,</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>          wetland_plot, </span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>          <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">'A.'</span>, <span class="st">'B.'</span>, <span class="st">'C.'</span>), </span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>          <span class="at">nrow =</span> <span class="dv">1</span>)</span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>all.plots</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="tutorial_uwin_ggplot2_files/figure-html/unnamed-chunk-44-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>This plot looks terrible because it fits to the screen’s dimensions without considering its own dimensions. Fortunately we can export it and make the resulting image file wider.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">plot =</span> all.plots, <span class="co">#Specify the (named) plot that you wish to save</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">filename =</span> <span class="st">'./images/all.plots_2.png'</span>, <span class="co">#Specify the file path that should be used to save this image (note that "./" is a shortcut that tells R to save the file to your current working directory.)</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">dpi =</span> <span class="dv">300</span>, <span class="co">#Specify the resolution (dots per linear inch; 300 is the minimum for graphics you wish to publish)</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">scale =</span> <span class="fl">0.75</span>,</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">width =</span> <span class="dv">16</span>, <span class="co">#Specify the width of the image</span></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">height =</span> <span class="dv">8</span>, <span class="co">#Specify the height of the image</span></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">units =</span> <span class="st">'in'</span>) <span class="co">#Specify the units of the previous two arguments</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><img src="./images/all.plots_2.png" class="img-fluid"></p>
</section>
<section id="post-analysis-coefficient-plot-graph-4" class="level3">
<h3 class="anchored" data-anchor-id="post-analysis-coefficient-plot-graph-4">Post-analysis: coefficient plot graph 4</h3>
<p>Now we are going to plot the coefficients of our model. For that, we need to extract the coefficient estimates of our model. This is a little tricky because we are dealing with S4 objects (a specific type of data in R) but in the end we will have a nice data frame with our coefficients that we can then put into a nice graph.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>summary_m1 <span class="ot">&lt;-</span> <span class="fu">summary</span>(m1) <span class="co">#Extract coefficient estimates from model m1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
occu(formula = ~1 ~ ag_scale + urban_scale + wetland_scale, data = raccoon_occ)

Occupancy (logit-scale):
              Estimate    SE      z P(&gt;|z|)
(Intercept)      0.433 0.258  1.675  0.0939
ag_scale         0.249 0.365  0.682  0.4950
urban_scale     -0.313 0.407 -0.770  0.4412
wetland_scale   -0.289 0.371 -0.778  0.4367

Detection (logit-scale):
 Estimate   SE    z P(&gt;|z|)
     0.49 0.15 3.26 0.00111

AIC: 362.5905 
Number of sites: 67
optim convergence code: 0
optim iterations: 25 
Bootstrap iterations: 0 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Create a data frame with three columns (named 'names_', 'estimates' and 'se' where...</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>model_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">names_ =</span> m1<span class="sc">@</span>estimates<span class="sc">@</span>estimates<span class="sc">$</span>state<span class="sc">@</span>estimates, <span class="co">#the names column is the stored name of each variable</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>                       <span class="at">estimates =</span> summary_m1<span class="sc">$</span>state<span class="sc">$</span>Estimate, <span class="co">#the estimates column is the point estimate of each regression coefficient</span></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>                       <span class="at">se =</span> summary_m1<span class="sc">$</span>state<span class="sc">$</span>SE) <span class="sc">|&gt;</span> <span class="co">#the se column is the standard error estimated in the regression process</span></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>  tibble<span class="sc">::</span><span class="fu">rownames_to_column</span>(<span class="at">var =</span> <span class="st">'names'</span>) <span class="sc">|&gt;</span> <span class="co">#Move the rownames to a column </span></span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">!</span>names_) <span class="sc">|&gt;</span> <span class="co">#We have the names duplicated, let's remove 'names_'</span></span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># let's calculate lower and upper 95%CI </span></span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">lower =</span> estimates <span class="sc">-</span> (se<span class="sc">*</span><span class="fl">1.96</span>), <span class="co">#Calculate 95% confidence intervals using the standard error</span></span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a>         <span class="at">upper =</span> estimates <span class="sc">+</span> (se<span class="sc">*</span><span class="fl">1.96</span>)) <span class="co">#Calculate 95% confidence intervals using the standard error</span></span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a>model_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          names  estimates        se       lower     upper
1   (Intercept)  0.4329113 0.2584263 -0.07360417 0.9394268
2      ag_scale  0.2493874 0.3654457 -0.46688614 0.9656610
3   urban_scale -0.3131325 0.4065844 -1.11003793 0.4837730
4 wetland_scale -0.2886517 0.3710924 -1.01599280 0.4386894</code></pre>
</div>
</div>
<p>What a beautiful data frame! You’ll notice that the first parameter shown is the model intercept. This is obviously an important term in our model, but we generally don’t visualize the intercept unless there’s a specific ecological rationale for doing so. That said, let’s remove it from our data frame.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>model_df <span class="ot">&lt;-</span> model_df[<span class="sc">-</span>(<span class="fu">which</span>(model_df<span class="sc">$</span>names <span class="sc">%in%</span> <span class="st">"(Intercept)"</span>)), ] <span class="co">#remove any rows whose value in the "names" column matches "(Intercept)"</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>model_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          names  estimates        se      lower     upper
2      ag_scale  0.2493874 0.3654457 -0.4668861 0.9656610
3   urban_scale -0.3131325 0.4065844 -1.1100379 0.4837730
4 wetland_scale -0.2886517 0.3710924 -1.0159928 0.4386894</code></pre>
</div>
</div>
<p>Now that our data frame only contains our parameters of interest, let’s make a nice plot with our point estimates!</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> model_df, <span class="co">#Specify data</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> estimates, <span class="at">y =</span> names))<span class="sc">+</span> <span class="co">#Specify our aesthetic mapping (axes)</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>) <span class="co">#Tell R to plot a point for each estimate</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="tutorial_uwin_ggplot2_files/figure-html/unnamed-chunk-48-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>This does a good job showing us how each of our estimates compare to eachother, but the information in this graph is pretty limited without also showing the uncertainty around each estimate. Let’s overcome that by adding our 95% confidence intervals using <code>geom_errorbar()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> model_df, <span class="co">#Specify data</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> estimates, <span class="at">y =</span> names))<span class="sc">+</span> <span class="co">#Specify our aesthetic mapping (axes)</span></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>)<span class="sc">+</span> <span class="co">#Tell R to plot a point for each estimate</span></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">xmin =</span> lower, <span class="co">#Use the value in the column named "lower" as the lower extreme for each error bar</span></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>                    <span class="at">xmax =</span> upper), <span class="co">#Use the value in the column named "upper" as the upper extreme for each error bar</span></span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>                <span class="at">linewidth =</span> <span class="dv">1</span>, <span class="co">#Set the thickness of the error bar line</span></span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>                <span class="at">width =</span> .<span class="dv">2</span>) <span class="co">#Set the height of the vertical ticks at the end of each error bar</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="tutorial_uwin_ggplot2_files/figure-html/unnamed-chunk-49-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Now let’s tinker with our axis limits and theme to make this a little more polished.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> model_df, <span class="co">#Specify data</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> estimates, <span class="at">y =</span> names))<span class="sc">+</span> <span class="co">#Specify our aesthetic mapping (axes)</span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>)<span class="sc">+</span> <span class="co">#Tell R to plot a point for each estimate</span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">xmin =</span> lower, <span class="co">#Use the value in the column named "lower" as the lower extreme for each error bar</span></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>                    <span class="at">xmax =</span> upper), <span class="co">#Use the value in the column named "upper" as the upper extreme for each error bar</span></span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>                <span class="at">linewidth =</span> <span class="dv">1</span>, <span class="co">#Set the thickness of the error bar line</span></span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>                <span class="at">width =</span> .<span class="dv">2</span>)<span class="sc">+</span> <span class="co">#Set the height of the vertical ticks at the end of each error bar</span></span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="sc">-</span><span class="fl">1.5</span>,<span class="fl">1.5</span>)<span class="sc">+</span> <span class="co">#Set lower and upper limits of the x axis</span></span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Estimated Coefficient"</span>)<span class="sc">+</span> <span class="co">#Specify the x axis label</span></span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Variable"</span>)<span class="sc">+</span> <span class="co">#Specify the y axis label</span></span>
<span id="cb46-11"><a href="#cb46-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="co">#specify our desired theme (no need to further adjust, you can simply use a pre-set theme as is if you'd like)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="tutorial_uwin_ggplot2_files/figure-html/unnamed-chunk-50-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Nice! This gives us a much better understanding of our estiamtes!</p>
<p>As we think about color, it’s worth noting that the color for our points and error bars are controlled seperately even though they look like the same object visually. That said, if you manually specify a <code>color</code>, be sure to inlude the argument within both <code>geom_point</code> and <code>geom_errorbar</code>.</p>
<p>Something else we should consider when thinking about color is what we intend each color to represent. Specifically, are we adding color to help us communicate our message, or to make it look pretty? We should always strive to meet an aesthetic standard when publishing a data visualization, but our message should always be more important than our aesthetics. A good excercise when thinking about color is to ask yourself “how does this help the viewer understand what I’m trying to say?”</p>
<p>With that in mind, although it is tempting to assign each variable a different color, does that add anything to our message? Consider that each variable is already plotted seperately from the others, and has a label. The seperation and label already communicate that each variable is distinct. Adding colors probably won’t add to that message, and might actually detract as the reader tries to understand what the colors mean and how that is different than the seperation already shown by the labels.</p>
<p>If you’re thinking “but wait - the same logic applies to graph 1 but we used different colors there anyway” then you are absolutely right. We probably should have limited our use of color in that graph to reduce the viewer’s mental load. We mostly used color there to illustrate how to assign colors in <code>ggplot2</code>. But have no fear, there are still a couple fun things we can do to make our plot look more appealing without detracting from our message. For instance, we can overlay an additional set of smaller white points on top of our existing plots to make our points look hollow.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> model_df, <span class="co">#Specify data</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> estimates, <span class="at">y =</span> names))<span class="sc">+</span> <span class="co">#Specify our aesthetic mapping (axes)</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="fl">3.5</span>)<span class="sc">+</span> <span class="co">#Tell R to plot a point for each estimate</span></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">xmin =</span> lower, <span class="co">#Use the value in the column named "lower" as the lower extreme for each error bar</span></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>                    <span class="at">xmax =</span> upper), <span class="co">#Use the value in the column named "upper" as the upper extreme for each error bar</span></span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>                <span class="at">linewidth =</span> <span class="dv">1</span>, <span class="co">#Set the thickness of the error bar line</span></span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a>                <span class="at">width =</span> .<span class="dv">2</span>)<span class="sc">+</span> <span class="co">#Set the height of the vertical ticks at the end of each error bar</span></span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">2</span> ,<span class="co">#Tell R to plot a point for each estimate, but make the size smaller than the original points</span></span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">"white"</span>)<span class="sc">+</span> <span class="co">#Use a different color to differentiate this point from the origianl points </span></span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="sc">-</span><span class="fl">1.5</span>,<span class="fl">1.5</span>)<span class="sc">+</span> <span class="co">#Set lower and upper limits of the x axis</span></span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Estimated Coefficient"</span>)<span class="sc">+</span> <span class="co">#Specify the x axis label</span></span>
<span id="cb47-12"><a href="#cb47-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Variable"</span>)<span class="sc">+</span> <span class="co">#Specify the y axis label</span></span>
<span id="cb47-13"><a href="#cb47-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="co">#specify our desired theme (no need to further adjust, you can simply use a pre-set theme as is if you'd like)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="tutorial_uwin_ggplot2_files/figure-html/unnamed-chunk-51-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Alternatively, we could change the shape of our points by adding the <code>shape</code> argument to <code>geom_point()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> model_df, <span class="co">#Specify data</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> estimates, <span class="at">y =</span> names))<span class="sc">+</span> <span class="co">#Specify our aesthetic mapping (axes)</span></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="fl">3.5</span>, <span class="co">#Tell R to plot a point for each estimate</span></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">shape =</span> <span class="dv">17</span>)<span class="sc">+</span> <span class="co">#set point shape to a triangle </span></span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">xmin =</span> lower, <span class="co">#Use the value in the column named "lower" as the lower extreme for each error bar</span></span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>                    <span class="at">xmax =</span> upper), <span class="co">#Use the value in the column named "upper" as the upper extreme for each error bar</span></span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a>                <span class="at">linewidth =</span> <span class="dv">1</span>, <span class="co">#Set the thickness of the error bar line</span></span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a>                <span class="at">width =</span> .<span class="dv">2</span>)<span class="sc">+</span> <span class="co">#Set the height of the vertical ticks at the end of each error bar</span></span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="sc">-</span><span class="fl">1.5</span>,<span class="fl">1.5</span>)<span class="sc">+</span> <span class="co">#Set lower and upper limits of the x axis</span></span>
<span id="cb48-10"><a href="#cb48-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Estimated Coefficient"</span>)<span class="sc">+</span> <span class="co">#Specify the x axis label</span></span>
<span id="cb48-11"><a href="#cb48-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Variable"</span>)<span class="sc">+</span> <span class="co">#Specify the y axis label</span></span>
<span id="cb48-12"><a href="#cb48-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="co">#specify our desired theme (no need to further adjust, you can simply use a pre-set theme as is if you'd like)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="tutorial_uwin_ggplot2_files/figure-html/unnamed-chunk-52-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Again, it wouldn’t be super helpful to use a different shape for each variable. But it might be appropriate to do that in certain circumstances. For example, if we wanted to plot the results from two different species side by side, we could use a different shape to denote each species.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>model_df<span class="sc">$</span>species <span class="ot">&lt;-</span> <span class="st">"raccoon"</span> <span class="co">#specify the species we've been working with</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a><span class="co">#make up some new data</span></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>new.data <span class="ot">&lt;-</span>  <span class="fu">data.frame</span>(<span class="at">names =</span> <span class="fu">c</span>(<span class="st">"ag_scale"</span>,<span class="st">"urban_scale"</span>,<span class="st">"wetland_scale"</span>),</span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>                        <span class="at">estimates =</span> <span class="fu">c</span>(<span class="fl">0.65</span>,<span class="sc">-</span><span class="fl">0.23</span>,<span class="fl">0.9</span>),</span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a>                        <span class="at">se =</span> <span class="fu">c</span>(<span class="fl">0.12</span>,<span class="fl">0.33</span>,<span class="fl">0.14</span>))</span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a>new.data<span class="sc">$</span>lower <span class="ot">&lt;-</span> new.data<span class="sc">$</span>estimates <span class="sc">-</span> (new.data<span class="sc">$</span>se<span class="sc">*</span><span class="fl">1.96</span>)</span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a>new.data<span class="sc">$</span>upper <span class="ot">&lt;-</span> new.data<span class="sc">$</span>estimates <span class="sc">+</span> (new.data<span class="sc">$</span>se<span class="sc">*</span><span class="fl">1.96</span>)</span>
<span id="cb49-9"><a href="#cb49-9" aria-hidden="true" tabindex="-1"></a>new.data<span class="sc">$</span>species <span class="ot">&lt;-</span> <span class="st">"bigfoot"</span></span>
<span id="cb49-10"><a href="#cb49-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-11"><a href="#cb49-11" aria-hidden="true" tabindex="-1"></a><span class="co">#combine existing data with new data</span></span>
<span id="cb49-12"><a href="#cb49-12" aria-hidden="true" tabindex="-1"></a>new.df <span class="ot">&lt;-</span> <span class="fu">rbind</span>(model_df, new.data)</span>
<span id="cb49-13"><a href="#cb49-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-14"><a href="#cb49-14" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> new.df, <span class="co">#Specify data</span></span>
<span id="cb49-15"><a href="#cb49-15" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> estimates, <span class="at">y =</span> names, <span class="co">#Specify our aesthetic mapping (axes)</span></span>
<span id="cb49-16"><a href="#cb49-16" aria-hidden="true" tabindex="-1"></a>           <span class="at">shape=</span> <span class="fu">factor</span>(species)))<span class="sc">+</span> </span>
<span id="cb49-17"><a href="#cb49-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>)<span class="sc">+</span> <span class="co">#Tell R to plot a point for each estimate</span></span>
<span id="cb49-18"><a href="#cb49-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">xmin =</span> lower, <span class="co">#Use the value in the column named "lower" as the lower extreme for each error bar</span></span>
<span id="cb49-19"><a href="#cb49-19" aria-hidden="true" tabindex="-1"></a>                    <span class="at">xmax =</span> upper), <span class="co">#Use the value in the column named "upper" as the upper extreme for each error bar</span></span>
<span id="cb49-20"><a href="#cb49-20" aria-hidden="true" tabindex="-1"></a>                <span class="at">linewidth =</span> <span class="dv">1</span>, <span class="co">#Set the thickness of the error bar line</span></span>
<span id="cb49-21"><a href="#cb49-21" aria-hidden="true" tabindex="-1"></a>                <span class="at">width =</span> .<span class="dv">2</span>)<span class="sc">+</span> <span class="co">#Set the height of the vertical ticks at the end of each error bar</span></span>
<span id="cb49-22"><a href="#cb49-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="sc">-</span><span class="fl">1.5</span>,<span class="fl">1.5</span>)<span class="sc">+</span> <span class="co">#Set lower and upper limits of the x axis</span></span>
<span id="cb49-23"><a href="#cb49-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Estimated Coefficient"</span>)<span class="sc">+</span> <span class="co">#Specify the x axis label</span></span>
<span id="cb49-24"><a href="#cb49-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Variable"</span>)<span class="sc">+</span> <span class="co">#Specify the y axis label</span></span>
<span id="cb49-25"><a href="#cb49-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="co">#specify our desired theme (no need to further adjust, you can simply use a pre-set theme as is if you'd like)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="tutorial_uwin_ggplot2_files/figure-html/unnamed-chunk-53-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Whoops! In the previous plot we added <code>shape = factor(species)</code> to <code>aes()</code>, which tells R to change the shape based on the value in the “species” column. But because the variables are still the same between the two species, they are plotted along the same axis. As a result, our data are plotted on top of each other and we can’t differentiate the 95% confidence intervals. Let’s fix that by adjusting the position of the points and error bars via the <code>position</code> argument.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> new.df, <span class="co">#Specify data</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> estimates, <span class="at">y =</span> names, <span class="co">#Specify our aesthetic mapping (axes)</span></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">shape=</span> <span class="fu">factor</span>(species)))<span class="sc">+</span> </span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>, <span class="co">#Tell R to plot a point for each estimate</span></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="fl">0.2</span>))<span class="sc">+</span> <span class="co">#Offset our points so they don't overlap</span></span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">xmin =</span> lower, <span class="co">#Use the value in the column named "lower" as the lower extreme for each error bar</span></span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>                    <span class="at">xmax =</span> upper), <span class="co">#Use the value in the column named "upper" as the upper extreme for each error bar</span></span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a>                <span class="at">linewidth =</span> <span class="dv">1</span>, <span class="co">#Set the thickness of the error bar line</span></span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a>                <span class="at">width =</span> .<span class="dv">2</span>, <span class="co">#Set the height of the vertical ticks at the end of each error bar</span></span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a>                <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="fl">0.2</span>))<span class="sc">+</span> <span class="co">#Offset our error bars so they don't overlap</span></span>
<span id="cb50-11"><a href="#cb50-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="sc">-</span><span class="fl">1.5</span>,<span class="fl">1.5</span>)<span class="sc">+</span> <span class="co">#Set lower and upper limits of the x axis</span></span>
<span id="cb50-12"><a href="#cb50-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Estimated Coefficient"</span>)<span class="sc">+</span> <span class="co">#Specify the x axis label</span></span>
<span id="cb50-13"><a href="#cb50-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Variable"</span>)<span class="sc">+</span> <span class="co">#Specify the y axis label</span></span>
<span id="cb50-14"><a href="#cb50-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="co">#specify our desired theme (no need to further adjust, you can simply use a pre-set theme as is if you'd like)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="tutorial_uwin_ggplot2_files/figure-html/unnamed-chunk-54-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Alternatively, we could use the same point shape for both species and change the color instead. If you’re thinking “but you said not to do that,” you’re absolutely right. When we discussed varying the color earlier, the different colors carried no actual meaning. But in cases like this, different colors mean different species and are thus appropriate. Just note that we swap <code>aes(shape = factor(species))</code> for <code>aes(color = factor(species))</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> new.df, <span class="co">#Specify data</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> estimates, <span class="at">y =</span> names, <span class="co">#Specify our aesthetic mapping (axes)</span></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">color =</span> <span class="fu">factor</span>(species)))<span class="sc">+</span> </span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>, <span class="co">#Tell R to plot a point for each estimate</span></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="fl">0.2</span>))<span class="sc">+</span> <span class="co">#Offset our points so they don't overlap</span></span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">xmin =</span> lower, <span class="co">#Use the value in the column named "lower" as the lower extreme for each error bar</span></span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a>                    <span class="at">xmax =</span> upper), <span class="co">#Use the value in the column named "upper" as the upper extreme for each error bar</span></span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a>                <span class="at">linewidth =</span> <span class="dv">1</span>, <span class="co">#Set the thickness of the error bar line</span></span>
<span id="cb51-9"><a href="#cb51-9" aria-hidden="true" tabindex="-1"></a>                <span class="at">width =</span> .<span class="dv">2</span>, <span class="co">#Set the height of the vertical ticks at the end of each error bar</span></span>
<span id="cb51-10"><a href="#cb51-10" aria-hidden="true" tabindex="-1"></a>                <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="fl">0.2</span>))<span class="sc">+</span> <span class="co">#Offset our error bars so they don't overlap</span></span>
<span id="cb51-11"><a href="#cb51-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="sc">-</span><span class="fl">1.5</span>,<span class="fl">1.5</span>)<span class="sc">+</span> <span class="co">#Set lower and upper limits of the x axis</span></span>
<span id="cb51-12"><a href="#cb51-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Estimated Coefficient"</span>)<span class="sc">+</span> <span class="co">#Specify the x axis label</span></span>
<span id="cb51-13"><a href="#cb51-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Variable"</span>)<span class="sc">+</span> <span class="co">#Specify the y axis label</span></span>
<span id="cb51-14"><a href="#cb51-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="co">#specify our desired theme (no need to further adjust, you can simply use a pre-set theme as is if you'd like)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="tutorial_uwin_ggplot2_files/figure-html/unnamed-chunk-55-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Just like before, R will use its default color palette unless you specify alternate colors. In our final plot, we’ll specify the colors we want using <code>scale_color_manual</code>, give our variables more formal names using <code>scale_y_discrete</code>, and modify our theme to remove the legend title.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>point.est_plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> new.df, <span class="co">#Specify data</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>                         <span class="fu">aes</span>(<span class="at">x =</span> estimates, <span class="at">y =</span> names, <span class="co">#Specify our aesthetic mapping (axes)</span></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>                             <span class="at">color =</span> <span class="fu">factor</span>(species)))<span class="sc">+</span> </span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>, <span class="co">#Tell R to plot a point for each estimate</span></span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="fl">0.2</span>))<span class="sc">+</span> <span class="co">#Offset our points so they don't overlap</span></span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">xmin =</span> lower, <span class="co">#Use the value in the column named "lower" as the lower extreme for each error bar</span></span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a>                    <span class="at">xmax =</span> upper), <span class="co">#Use the value in the column named "upper" as the upper extreme for each error bar</span></span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a>                <span class="at">linewidth =</span> <span class="dv">1</span>, <span class="co">#Set the thickness of the error bar line</span></span>
<span id="cb52-9"><a href="#cb52-9" aria-hidden="true" tabindex="-1"></a>                <span class="at">width =</span> .<span class="dv">2</span>, <span class="co">#Set the height of the vertical ticks at the end of each error bar</span></span>
<span id="cb52-10"><a href="#cb52-10" aria-hidden="true" tabindex="-1"></a>                <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="fl">0.2</span>))<span class="sc">+</span> <span class="co">#Offset our error bars so they don't overlap</span></span>
<span id="cb52-11"><a href="#cb52-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"cornflowerblue"</span>, <span class="st">'#D35C4B'</span>))<span class="sc">+</span> <span class="co">#specify the colors we would like to use</span></span>
<span id="cb52-12"><a href="#cb52-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="sc">-</span><span class="fl">1.5</span>,<span class="fl">1.5</span>)<span class="sc">+</span> <span class="co">#Set lower and upper limits of the x axis</span></span>
<span id="cb52-13"><a href="#cb52-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Estimated Coefficient"</span>)<span class="sc">+</span> <span class="co">#Specify the x axis label</span></span>
<span id="cb52-14"><a href="#cb52-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Variable"</span>)<span class="sc">+</span> <span class="co">#Specify the y axis label</span></span>
<span id="cb52-15"><a href="#cb52-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_discrete</span>(<span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"agriculture"</span>,<span class="st">"urban"</span>,<span class="st">"wetland"</span>)) <span class="sc">+</span> <span class="co">#Supply R with the names we would like to use instead of the column names</span></span>
<span id="cb52-16"><a href="#cb52-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>()<span class="sc">+</span> <span class="co">#specify our desired theme</span></span>
<span id="cb52-17"><a href="#cb52-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.title =</span> <span class="fu">element_blank</span>(), </span>
<span id="cb52-18"><a href="#cb52-18" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">'bold'</span>, <span class="at">size =</span> <span class="dv">14</span>), </span>
<span id="cb52-19"><a href="#cb52-19" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span><span class="dv">12</span>)) <span class="co">#element_blank tells R to ignore this component of the graph.)</span></span>
<span id="cb52-20"><a href="#cb52-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-21"><a href="#cb52-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-22"><a href="#cb52-22" aria-hidden="true" tabindex="-1"></a>point.est_plot</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="tutorial_uwin_ggplot2_files/figure-html/unnamed-chunk-56-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Do you remember how we used the <code>plot_grid()</code> function from the <code>cowplot</code> package earlier? That function is great for automatically arranging plots, but we can exercise more control by using the <code>ggdraw</code> function, which allows us to specify the location of each plot within the larger figure using the <code>draw_plot()</code> function.</p>
<p>Let’s see how this works by manually combining our effect plots and the point estimate plot.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co"># We already saved our initial plot as all.plots </span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="co"># now we want to combine all.plots with point.est_plot</span></span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a><span class="co"># let's save point.est_plot as a plot_grid object to include a label D</span></span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>d_panel <span class="ot">&lt;-</span> <span class="fu">plot_grid</span>(</span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a>  point.est_plot, </span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">'D'</span>)</span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb53-9"><a href="#cb53-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-10"><a href="#cb53-10" aria-hidden="true" tabindex="-1"></a><span class="co"># now let's combine all panels </span></span>
<span id="cb53-11"><a href="#cb53-11" aria-hidden="true" tabindex="-1"></a>all_panels <span class="ot">&lt;-</span> <span class="fu">plot_grid</span>(</span>
<span id="cb53-12"><a href="#cb53-12" aria-hidden="true" tabindex="-1"></a>  all.plots, </span>
<span id="cb53-13"><a href="#cb53-13" aria-hidden="true" tabindex="-1"></a>  d_panel, </span>
<span id="cb53-14"><a href="#cb53-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">nrow =</span> <span class="dv">2</span>, <span class="co"># we want two rows </span></span>
<span id="cb53-15"><a href="#cb53-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">rel_heights =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>) <span class="co"># both rows have the same height ratio </span></span>
<span id="cb53-16"><a href="#cb53-16" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb53-17"><a href="#cb53-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-18"><a href="#cb53-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-19"><a href="#cb53-19" aria-hidden="true" tabindex="-1"></a>all_panels</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="tutorial_uwin_ggplot2_files/figure-html/unnamed-chunk-57-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Once again, this plot doesn’t look great since its components are being squeezed into our screen dimensions. We can fix this by saving the plot.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">plot =</span> all_panels, <span class="co">#Specify the (named) plot that you wish to save</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">filename =</span> <span class="st">'./images/all_panels.png'</span>, <span class="co">#Specify the file path that should be used to save this image (note that "./" is a shortcut that tells R to save the file to your current working directory.)</span></span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">dpi =</span> <span class="dv">300</span>, <span class="co">#Specify the resolution (dots per linear inch; 300 is the minimum for graphics you wish to publish)</span></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">scale =</span> <span class="fl">0.65</span>,</span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">width =</span> <span class="dv">14</span>, <span class="co">#Specify the width of the image</span></span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">height =</span> <span class="dv">14</span>, <span class="co">#Specify the height of the image</span></span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">units =</span> <span class="st">'in'</span>) <span class="co">#Specify the units of the previous two arguments</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><img src="./images/all_panels.png" class="img-fluid"></p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Congratulations! You finished the tutorial! Hopefully you feel confident in your new found knowledge and abilities. Now go forth and make beautiful figures!</p>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">Copyright 2024 Gabriela Palomo-Munoz. All text and images licensed CC-BY-NC 4.0.<div class="cookie-consent-footer"><a href="#" id="open_preferences_center">Cookie Preferences</a></div></div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>



</body></html>